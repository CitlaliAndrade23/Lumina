{% extends "navbar.html" %}

{% block title %}Detalles - {{ producto.nombre }}{% endblock %}

{% block content %}

{# ─── Config por slug para imágenes y colores ─── #}
{% set config_por_slug = {
  'bar':   {'img1':'img/bar1.png',   'img2':'img/bar2.png',   'c1':'#0044ff', 'c2':'#ff0000'},
  'banos': {'img1':'img/banos.jpg',  'img2':'img/banos2.png', 'c1':'#ff0000', 'c2':'#572364'},
  'open':  {'img1':'img/open.jpg',   'img2':'img/open2.png',  'c1':'#0044ff', 'c2':'#ff0080'},
  'closed':{'img1':'img/closed.jpg', 'img2':'img/closed2.png','c1':'#ff0000', 'c2':'#572364'},
  'twich': {'img1':'img/twich1.png', 'img2':'img/twich2.png', 'c1':'#572364', 'c2':'#ff0000'},
  'exit':  {'img1':'img/exit1.png',  'img2':'img/exit2.png',  'c1':'#0044ff', 'c2':'#20FA07'}
} %}

{# Toma la config según el slug; si no hay, usa su imagen base #}
{% set cfg = config_por_slug.get(producto.slug, {
  'img1': producto.imagen, 'img2': producto.imagen, 'c1':'#0044ff','c2':'#ff0000'
}) %}

{# ===== BLOQUE PRODUCTO + WAVE (con degradado) ===== #}
<div class="product-wrapper">

  <div class="product" id="product">
    <!-- IMAGEN PRINCIPAL -->
    <img src="{{ url_for('static', filename=cfg['img1']) }}"
         alt="{{ producto.nombre }}"
         class="productImg">

    <!-- DETALLES DEL PRODUCTO -->
    <div class="productDetails">
      <h1 class="productTitle">{{ producto.nombre }}</h1>
      <h2 class="productPrice">${{ producto.precio }}</h2>

      <p class="productDesc">
        Precios y disponibilidad válidos en tienda en línea.
        Hacemos nuestro mejor esfuerzo para mostrar inventario y ubicación del producto
        en tienda lo más actualizado posible. Sin embargo, pudieran existir ligeras
        diferencias en tienda versus lo que está en línea. Todas las imágenes mostradas son con fines ilustrativos.
      </p>

      <!-- COLORES / VARIANTES -->
<div class="colors">
  <div class="color"
       data-img="{{ url_for('static', filename=cfg['img1']) }}"
       data-color="{{ cfg['c1'] }}"
       style="background-color: {{ cfg['c1'] }};">
  </div>
  <div class="color"
       data-img="{{ url_for('static', filename=cfg['img2']) }}"
       data-color="{{ cfg['c2'] }}"
       style="background-color: {{ cfg['c2'] }};">
  </div>
</div>


           <!-- TAMAÑOS -->
      <div class="sizes">
        <div class="size active" data-medida="40 X 30">40 X 30</div>
        <div class="size" data-medida="30 X 20">30 X 20</div>
        <div class="size" data-medida="30 X 10">30 X 10</div>
      </div>

      <!-- COMPRAR / AGREGAR (requiere login por la ruta protegida /agregar) -->
 {% if session.get('logged_in') %}
  <form method="post"
        action="{{ url_for('agregar', producto_slug=producto.slug) }}"
        class="js-add-to-cart-form">
    <input type="hidden" name="qty" value="1">
    <input type="hidden" name="medida" id="medidaInput" value="40 X 30">
    <input type="hidden" name="color" id="colorInput" value="">

    <div class="actions" style="display:flex; gap:12px; align-items:center; flex-direction:column;">
      <!-- Botón normal: solo agrega al carrito -->
      <button type="submit"
              class="btn btn-outline-primary"
              name="accion"
              value="add">
        Agregar al carrito
      </button>

      <!-- Botón: agrega y luego lleva al carrito -->
      <button type="submit"
              class="btn btn-primary"
              name="accion"
              value="buy">
        Comprar ahora
      </button>
    </div>
  </form>
{% else %}
  <div class="alert alert-warning mt-2">Debes iniciar sesión para comprar.</div>
  <a class="btn btn-outline-primary" href="{{ url_for('login', next=request.path) }}">Iniciar sesión</a>
  <a class="btn btn-primary" href="{{ url_for('signup', next=request.path) }}">Registrarse</a>
{% endif %}


    </div>  {# /productDetails #}

  </div>  {# /product #}

  <!-- Onda decorativa inferior que “recorta” el degradado -->
  <div class="wave-bottom">
    <svg viewBox="0 0 1440 500" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
      <path
        d="M0,320 C480,480 960,160 1440,320 L1440,500 L0,500 Z">
      </path>
    </svg>
  </div>

</div> {# /product-wrapper #}

<!-- (Opcional) Panel de pago decorativo (overlay) -->
<div class="payment" id="paymentModal" style="display:none;">
  <h1 class="payTitle">Información personal</h1>
  <label>Nombre de usuario</label>
  <input type="text" placeholder="Cosme Fulanito" class="payInput">
  <label>Número telefónico</label>
  <input type="text" placeholder="+52 614 123 4567" class="payInput">
  <label>Correo electrónico</label>
  <input type="text" placeholder="cosme@gmail.com" class="payInput">

  <h1 class="payTitle">Número de tarjeta</h1>
  <input type="password" class="payInput" placeholder="Card Number">

  <div class="cardInfo">
    <input type="text" placeholder="Día" class="payInput sm">
    <input type="text" placeholder="Mes" class="payInput sm">
    <input type="text" placeholder="Año" class="payInput sm">
  </div>

  <div class="cardIcons">
    <img src="{{ url_for('static', filename='img/visa.png') }}" width="40" alt="Visa" class="cardIcon">
    <img src="{{ url_for('static', filename='img/master.png') }}" width="40" alt="Mastercard" class="cardIcon">
  </div>

  <button class="payButton">¡Pagar!</button>
  <span class="close" id="closePay">X</span>
</div>

 <!-- Sección de Reseñas y Materiales -->
<section class="tabs-section">
  <div class="tabs">
    <button class="tab-button active" data-tab="reseñas">Reseñas</button>
    <button class="tab-button" data-tab="materiales">Materiales</button>
  </div>

  <div class="tab-content active" id="reseñas">
    <h2 class="reviews-title">Opiniones de nuestros clientes</h2>
    <div class="reviews-container">
      <div class="review-card light">
        <div class="review-header">
          <img src="{{ url_for('static', filename='img/user1.jpg') }}" alt="Usuario" class="review-avatar">
          <div class="review-name">Carlos G.</div>
          <div class="review-stars">★★★★★</div>
        </div>
        <p class="review-text">
          “¡Me encantó mi letrero! Pedí uno con mi frase favorita y quedó idéntico al diseño que imaginaba.
                La luz es muy suave y el color rosa neón se ve increíble en mi habitación.”
        </p>
      </div>

      <div class="review-card dark">
        <div class="review-header">
          <img src="{{ url_for('static', filename='img/user2.jpg') }}" alt="Usuario" class="review-avatar">
          <div class="review-name">Mariana L.</div>
          <div class="review-stars">★★★★☆</div>
        </div>
        <p class="review-text">
          “Excelente calidad y atención. Me ayudaron a ajustar el tamaño para mi local y el resultado fue justo lo que necesitaba.
            Tardó un poco más de lo esperado, pero valió totalmente la pena.”
        </p>
      </div>

      <div class="review-card light">
        <div class="review-header">
          <img src="{{ url_for('static', filename='img/user3.jpg') }}" alt="Usuario" class="review-avatar">
          <div class="review-name">Andrea P.</div>
          <div class="review-stars">★★★★★</div>
        </div>
        <p class="review-text">
          “Súper recomendado. El equipo de Lumina entendió perfecto mi idea. El letrero “Dream Big” quedó precioso y le dio vida a mi estudio.
            ¡Sin duda volveré a pedir otro!”
        </p>
      </div>
    </div>
  </div>

  <div class="tab-content" id="materiales">
    <h2 class="reviews-title">Materiales y calidad</h2>
    <p class="materials-text">
      Nuestros letreros están fabricados con materiales de alta durabilidad y acabado profesional:
    </p>
    <ul class="materials-list">
      <li>Acrílico resistente a rayones</li>
      <li>Iluminación LED de bajo consumo</li>
      <li>Montura de aluminio ligero</li>
      <li>Protección contra humedad y polvo (IP65)</li>
    </ul>
  </div>
</section>

  <!-- FOOTER -->
<footer class="lumina-footer py-4">
  <div class="container text-center">
    <!-- Logo -->
    <div class="footer-logo mb-3">
      <img src="{{ url_for('static', filename='img/LogoLumina.png') }}" 
           alt="Logo Lumina" 
           class="footer-logo-img">
    </div>

   <!-- Redes sociales -->
<div class="social-icons d-flex justify-content-center gap-3">
  <a href="#" aria-label="Facebook">
    <img src="{{ url_for('static', filename='img/iconos1.png') }}" 
         alt="Facebook" 
         class="social-icon-img">
  </a>
  <a href="#" aria-label="Instagram">
    <img src="{{ url_for('static', filename='img/iconos2.png') }}" 
         alt="Instagram" 
         class="social-icon-img">
  </a>
  <a href="#" aria-label="Tiktok">
    <img src="{{ url_for('static', filename='img/iconos3.png') }}" 
         alt="Tiktok" 
         class="social-icon-img">
  </a>
</div>

</footer>


<!-- CSS -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/detalles1.css') }}">

<script src="{{ url_for('static', filename='js/detalles1.js') }}"></script>

{% endblock %}
